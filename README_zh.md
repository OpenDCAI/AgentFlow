<div align="center">
  <img src="assets/intro.png">

[![Datasets](https://img.shields.io/badge/Datasets-5EDDD2?style=for-the-badge&logo=huggingface&logoColor=yellow)](https://huggingface.co/collections/OpenDCAI/agentflow-models)
[![Models](https://img.shields.io/badge/Models-4285F4?style=for-the-badge&logo=huggingface&logoColor=yellow)](https://huggingface.co/collections/OpenDCAI/agentflow-models)
[![GITHUB](https://img.shields.io/badge/Github-24292F?style=for-the-badge&logo=github&logoColor=white)](https://github.com/OpenDCAI/AgentFlow)
[![Docmutation](https://img.shields.io/badge/Docmutation-red?style=for-the-badge&logo=google-chrome&logoColor=white)](https://opendcai.github.io/AgentFlow-Doc/en/)
 </div>

<p align="center">
  <a href="README.md">English</a> | <b>ä¸­æ–‡</b>
</p>

**é¦–ä¸ªç»Ÿä¸€çš„ Agent æ•°æ®åˆæˆæ¡†æ¶**ï¼Œä¸ºè‡ªå®šä¹‰ä»»åŠ¡æä¾› all-in-one ç¯å¢ƒã€‚

## ğŸš€ æ¦‚è§ˆ

**AgentFlow** æ˜¯**é¦–ä¸ªç»Ÿä¸€çš„ Agent æ•°æ®åˆæˆæ¡†æ¶**ï¼Œèƒ½å¤Ÿè·¨å¼‚æ„ Agent ç¯å¢ƒç”Ÿæˆé«˜è´¨é‡çš„è®­ç»ƒä¸è¯„ä¼°æ•°æ®â€”â€”æ¶µç›– ğŸ“š RAGã€ğŸ–¼ï¸ MM-Docã€ğŸ” Deep Researchã€ğŸ–±ï¸ GUIã€ğŸŸ° Text2SQLã€ğŸ“Š Data Analysisã€ğŸ¤– Embodied Agent ç­‰ã€‚

AgentFlow æä¾›äº†ä¸€ä¸ª**ç»Ÿä¸€ã€å¯æ‰©å±•çš„ all-in-one ç¯å¢ƒ**ï¼Œç”¨äºåˆæˆ agent trajectoryã€reasoning traceã€tool interaction å’Œ environment feedbackã€‚

AgentFlow è¿˜æ·±å…¥æ¢ç´¢äº† agent æ•°æ®åˆæˆä¸æ¨¡å‹è®­ç»ƒçš„å†…åœ¨æœºåˆ¶ï¼ŒåŠ©åŠ›æ„å»ºèƒ½å¤Ÿè·¨é¢†åŸŸæ— ç¼è¿è¡Œçš„**å·¥ä¸šçº§ Agentic Foundation Model**ã€‚

é™¤äº†åˆæˆè®­ç»ƒæ•°æ®ï¼ŒAgentFlow è¿˜æä¾›é«˜è´¨é‡çš„äººå·¥æ ‡æ³¨ä¸åˆæˆ benchmarkï¼Œç”¨äºè¯„ä¼°æ–°å…´ agent èƒ½åŠ›å¹¶æ¢ç´¢å…¶è¾¹ç•Œã€‚

> **One framework. All agent worlds.**

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ç»Ÿä¸€çš„ Agent æ•°æ®åˆæˆèŒƒå¼

- ä»…éœ€å‡ è¡Œä»£ç å³å¯åˆæˆå¤æ‚çš„ agent è®­ç»ƒæ•°æ®ã€‚
- æä¾›**ç»Ÿä¸€çš„æŠ½è±¡å±‚**ï¼Œå®ç°è·¨å¼‚æ„ agent ç¯å¢ƒçš„æ— ç¼æ•°æ®åˆæˆã€‚

### All-in-One Sandbox

- å†…ç½®æ”¯æŒ ğŸ“š RAGã€ğŸ–¼ï¸ MM-Docã€ğŸ” Deep Researchã€ğŸ’» Codeã€ğŸŸ° SQL Databaseã€ğŸ–±ï¸ GUIã€ğŸ¤– Embodied ç­‰ç¯å¢ƒã€‚
- é€šè¿‡**æ¨¡å—åŒ–åç«¯è®¾è®¡**ï¼Œå¯è½»æ¾æ‰©å±•è‡³æ–°ç¯å¢ƒã€‚

### æ¢ç´¢ Agent æ•°æ®åˆæˆä¸è®­ç»ƒçš„æœºåˆ¶

- **Agentic Model Consolidationï¼š** åœ¨æ¥è‡ªæ‰€æœ‰é¢†åŸŸçš„æ··åˆ trajectory ä¸Šè”åˆä¸”ç¨³å®šåœ°è®­ç»ƒç»Ÿä¸€æ¨¡å‹ã€‚

### åˆ›æ–°æ€§é«˜ä»·å€¼ Agent Benchmark

- æä¾›ä¸€ç³»åˆ—ä¸“ä¸ºè¯„ä¼° agentic èƒ½åŠ›è€Œè®¾è®¡çš„é«˜è´¨é‡ benchmarkã€‚
- æ—¨åœ¨æ­ç¤ºç°æœ‰ benchmark æœªèƒ½è¦†ç›–çš„çœŸå®æŒ‘æˆ˜ï¼Œæ¨åŠ¨ agent ç ”ç©¶çš„å®è´¨æ€§è¿›å±•ã€‚

## âš™ï¸ æ•°æ®åˆæˆæ–¹æ³•

<div align="center">
  <img src="assets/method.png">
</div>

AgentFlow é€šè¿‡ä¸‰é˜¶æ®µ pipeline åˆæˆé«˜è´¨é‡çš„ agent è®­ç»ƒæ•°æ®ï¼š**Trajectory Sampling â†’ Trajectory Selection â†’ QA Synthesis**ã€‚

1. **Trajectory Sampling.** ç”± LLM é©±åŠ¨çš„ agent ä» seed input å‡ºå‘ï¼Œåœ¨ sandbox ç¯å¢ƒä¸­è¿­ä»£æ¢ç´¢ã€‚æ¯ä¸€æ­¥æå‡ºä¸€æ¬¡ tool callã€æ‰§è¡Œå¹¶è®°å½• observationï¼Œé€šè¿‡å¹¶å‘æ‰©å±•å’Œ action å»é‡æ„å»ºåˆ†æ”¯ trajectory treeã€‚

2. **Trajectory Selection.** å¯¹æ‰€æœ‰ root-to-leaf è·¯å¾„æŒ‰æ·±åº¦ã€ä¿¡æ¯ä¸°å¯Œåº¦å’Œå·¥å…·å¤šæ ·æ€§æ‰“åˆ†ï¼Œç„¶åé€šè¿‡ç­–ç•¥ç­›é€‰ï¼Œç¡®ä¿é«˜è´¨é‡å†…å®¹ã€‚

3. **QA Synthesis.** å¯¹æ¯æ¡é€‰ä¸­çš„è·¯å¾„ï¼ŒLLM åŸºäºæ”¶é›†åˆ°çš„ observation ç”Ÿæˆ multi-hopã€factoid QA pairï¼Œå¹¶å†…ç½®è´¨é‡æ£€æŸ¥ã€‚

## ğŸ“¦ å®‰è£…

```bash
git clone https://github.com/OpenDCAI/AgentFlow
cd AgentFlow
pip install -e .
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

ä»¥ WebAgent æ•°æ®åˆæˆä¸ºä¾‹ã€‚

**Step 1ï¼š** ä½¿ç”¨ WebAgent sandbox é…ç½®å¯åŠ¨ sandboxã€‚

```bash
./sandbox-server.sh --config configs/sandbox-server/web_config.json \
    --port 18890 \
    --host 0.0.0.0
```

**Step 2ï¼š** ä½¿ç”¨ WebAgent synthesis é…ç½®åˆæˆ QAã€‚

```python
from synthesis import synthesize

synthesize(config_path="configs/synthesis/web_config.json")
```

**Step 3ï¼š** ä½¿ç”¨ WebAgent trajectory é…ç½®åˆæˆ trajectoryã€‚

```python
from rollout import pipeline

pipeline(config_path="configs/trajectory/web_trajectory.json")
```

**Step 4ï¼š** æ¨¡å‹è®­ç»ƒå®Œæˆåï¼Œä½¿ç”¨ vLLM éƒ¨ç½²æ¨¡å‹ã€‚

```bash
vllm serve \
    --model YOUR_TRAINED_MODEL \
    --served-model-name webagent \
    --tensor-parallel-size 8 \
    --enable-auto-tool-choice \
    --tool-call-parser hermes \
    --port 8222
```

**Step 5ï¼š** ä½¿ç”¨ infer é…ç½®å¯¹è®­ç»ƒå¥½çš„ Agent æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚

```python
from rollout import pipeline

pipeline(config_path="configs/infer/web_infer.json")
```

## âš™ï¸ é…ç½®è¯´æ˜

| ç”¨é€” | é…ç½®è·¯å¾„ |
| ---- | ------- |
| ğŸ–¥ï¸ å¯åŠ¨ Sandbox | [`configs/sandbox-server/`](https://github.com/OpenDCAI/AgentFlow/tree/main/configs/sandbox-server/) |
| ğŸ§ª åˆæˆ QA | [`configs/synthesis/`](https://github.com/OpenDCAI/AgentFlow/tree/main/configs/synthesis/) |
| ğŸ”„ Trajectory Rollout | [`configs/trajectory/`](https://github.com/OpenDCAI/AgentFlow/tree/main/configs/trajectory/) |
| ğŸš€ æ¨¡å‹æ¨ç† | [`configs/infer/`](https://github.com/OpenDCAI/AgentFlow/tree/main/configs/infer/) |

## ğŸŒŸ AgentFlow Agent Family

### Papers

AgentFlow æ‹¥æœ‰ä¸°å¯Œçš„ agent ç³»åˆ—ï¼Œæ›´å¤šä¿¡æ¯è¯·å‚é˜…ä»¥ä¸‹è®ºæ–‡ï¼š

[1] [DocDancer: Towards Agentic Document-Grounded Information Seeking](https://arxiv.org/pdf/2601.05163)

[2] [RAGShaper: Eliciting Sophisticated Agentic RAG Skills via Automated Data Synthesis](https://arxiv.org/pdf/2601.08699)

[3] [Exploring Information Seeking Agent Consolidation](https://www.arxiv.org/pdf/2602.00585)

[4] [BrowseComp-V3: A Visual, Vertical, and Verifiable Benchmark for Multimodal Browsing Agents](https://arxiv.org/pdf/2602.12876)

### Models

| Agent | ğŸ¤— HuggingFace |
| ----- | -------------- |
| MM-Doc | [DocDancer](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-DocDancer) |
| RAG | [RAGShaper](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-RAGShaper) |
| DeepResearch | [DeepResearch Agent](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-Web) |
| General-datamix | [Agent-datamix](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-DataMix) |
| General-RegMeanpp | [Agent-RegMeanpp](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-RegMeanpp) |

### Datasets

| Agent | ğŸ¤— HuggingFace |
| ----- | -------------- |
| MM-Doc | [DocDancer](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-DocDancer) |
| RAG | [RAGShaper](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-RAGShaper) |
| DeepResearch | [DeepResearch Agent](https://huggingface.co/OpenDCAI/AgentFlow-Qwen3-30B-A3B-Think-Web) |

### Benchmarks
#### BrowseComp-V3

A challenging benchmark of 300 hand-crafted multimodal questions for evaluating web browsing agents. It features deep multi-hop, cross-modal reasoning across diverse domains, with publicly searchable evidence and expert-validated subgoal-driven process evaluation. Even SOTA models like GPT-5.2 achieve only 36% accuracy. Includes **OmniSeeker**, a general multimodal browsing agent framework, along with full rollout and LLM-judge evaluation pipelines.

ğŸ“„ [Project Page](https://halcyon-zhang.github.io/BrowseComp-V3/) Â· ğŸ¤— [Dataset](https://huggingface.co/datasets/Halcyon-Zhang/BrowseComp-V3) Â· ğŸ’» [GitHub](https://github.com/Halcyon-Zhang/BrowseComp-V3)


## ğŸ§ª Overall Performance

### Qwen3-30B-A3B-Think

| Level | **Strategy** | **Web: GAIA (Acc.)** | **Web: BC (Acc.)** | **Web: BC-zh (Acc.)** | **Doc: MMBD (Acc.)** | **Doc: DocB (Acc.)** | **RAG: HotPotQA (EM/F1)** | **RAG: AmbigQA (F1/EM)** | **RAG: Bamboogle (F1/EM)** |
| ---- | ------- | -------------------- | ------------------ | --------------------- | -------------------- | -------------------- | ------------------------- | ------------------------ | -------------------------- |
| **Data-level** | Data Mixing | **64.08** | **28.00** | **34.00** | 63.59 | **83.29** | 38.00 / 42.53 | 49.50 / 58.84 | 53.10 / 60.20 |
| **Parameter-level** | RegMean++ | 60.19 | 22.50 | 28.00 | 64.66 | 80.76 | 45.50 / 58.27 | 58.80 / 69.36 | **52.80 / 66.48** |

### ğŸ”— RAG Agent Case and Performance

Agentic RAG is an approach where an autonomous agent actively decides how and when to retrieve information and reason over it to accomplish a task.

| Models | Bamboogle EM | Bamboogle F1 | PopQA EM | PopQA F1 | NQ EM | NQ F1 | AmbigQA EM | AmbigQA F1 | Avg EM | Avg F1 |
| ---- | ------------ | ------------ | -------- | -------- | ----- | ----- | ---------- | ---------- | ------ | ------ |
| **Prompt-Based Methods** | | | | | | | | | | |
| IR-COT | 16.0 | 27.9 | 32.4 | 39.9 | 19.3 | 35.5 | 24.5 | 40.6 | 23.1 | 36.0 |
| RECOMP | 21.7 | 28.6 | 40.5 | 45.8 | â€“ | â€“ | â€“ | â€“ | â€“ | â€“ |
| Search-o1 | 30.4 | 39.9 | 47.0 | 50.0 | 30.3 | 40.7 | 42.5 | 53.4 | 37.6 | 46.0 |
| **Learning-Based Methods** | | | | | | | | | | |
| Search-R1 | 30.4 | 43.2 | 41.3 | 46.4 | 36.0 | 45.0 | 49.2 | 60.4 | 39.2 | 48.8 |
| ReasonRAG | 22.4 | 29.1 | 41.1 | 44.4 | 28.1 | 38.9 | 39.7 | 51.9 | 32.8 | 41.1 |
| HL-Data 4.5k | 50.4 | 67.5 | 35.2 | 48.3 | 31.5 | 47.4 | 52.1 | 69.0 | 42.3 | 58.0 |
| **Ours** | | | | | | | | | | |
| **RAGShaper 4.5k** | 58.5 | 70.3 | 37.4 | 47.8 | 38.3 | 50.0 | **61.3** | **71.4** | 48.8 | 59.8 |
| **RAGShaper 6.5k** | **60.0** | **72.6** | 38.9 | 49.6 | **41.3** | **54.8** | 61.1 | 71.1 | **50.3** | **62.0** |

```python
ğŸ™‹ Question

A major literary work commissioned by the Holy Roman Emperor whose reign began in 1508 was part of his grand artistic legacy. While this patron commissioned famous manuscript anthologies during this period, this specific allegorical epic was distinctively designed for the printing press to ensure a wider audience. **What is the exact publication year of its first edition?**

ğŸ’¡ Answer
1517
```

### ğŸ”¬ Document Agent Case and Performance

Document agent answers complex questions over multi-page documents by navigating, extracting, and reasoning across heterogeneous contentâ€”including text, tables, charts, and images.

### Benchmark Results Comparison

| Method | Model | MMLongBench-Doc acc | F1 | LasJ | DocBench LasJ |
| ---- | ---- | ------------------- | -- | ---- | ------------- |
| **OCR-based Baseline** | | | | | |
| Tesseract | GPT-4o | 30.1 | 30.5 | â€” | â€” |
| Tesseract | Gemini-2.0-Flash | 39.6 | 37.2 | â€” | â€” |
| **RAG-based Baseline** | | | | | |
| VisRAG | GPT-4o | 29.0 | 27.8 | â€” | â€” |
| RAGAnything | GPT-4o-mini | 42.8 | â€” | â€” | 63.4 |
| **Prompt-based Agent** | | | | | |
| Doc-React | GPT-4o | 38.1 | 38.3 | â€” | â€” |
| MDocAgent | GPT-4o | 42.0 | â€” | â€” | â€” |
| SimpleDoc | Claude-4-Sonnet | â€” | â€” | 58.6 | â€” |
| DocLens | Claude-4-Sonnet | â€” | â€” | 63.3 | â€” |
| **Ours** | | | | | |
| DocDancer | Qwen3-4B (ft) | 48.4 | 49.2 | 59.4 | 79.8 |
| DocDancer | Qwen3-30B-A3B (ft) | 54.4 | 53.9 | 65.3 | 81.2 |
| **Human Baseline** | â€” | 65.8 | 66.0 | â€” | 81.2 |

```python
ğŸ™‹ Question

What is the difference in percentage-point increase between the overall mean score improvement shown in the bar chart of pre-test versus post-test scores and the improvement for the TIC Principle concept reported in the percentages table?

ğŸ’¡ Answer
14.92%
```

### ğŸ–±ï¸ Data Analysis Agent Case

```python
ğŸ™‹ Question

Which feature has the highest importance in predicting 'time / retired' according to the Random Forest model?

ğŸ’¡ Answer
laps
```

### ğŸ–±ï¸ NL2SQL Agent Case

```python
Find customers whose spending is above the overall average, and show their top 2 most spent music genres along with the amount spent on each.
```

```sql
WITH CustomerTotal AS (
    SELECT c.CustomerId, SUM(il.UnitPrice * il.Quantity) AS TotalSpent
    FROM Customer c
    JOIN Invoice i ON c.CustomerId = i.CustomerId
    JOIN InvoiceLine il ON i.InvoiceId = il.InvoiceId
    GROUP BY c.CustomerId
),
AverageSpending AS (
    SELECT AVG(TotalSpent) AS AvgSpent FROM CustomerTotal
),
GenreSpending AS (
    SELECT c.CustomerId, g.Name AS GenreName, SUM(il.UnitPrice * il.Quantity) AS GenreSpent
    FROM Customer c
    JOIN Invoice i ON c.CustomerId = i.CustomerId
    JOIN InvoiceLine il ON i.InvoiceId = il.InvoiceId
    JOIN Track t ON il.TrackId = t.TrackId
    JOIN Genre g ON t.GenreId = g.GenreId
    GROUP BY c.CustomerId, g.GenreId
),
TopGenres AS (
    SELECT gs.CustomerId, gs.GenreName, gs.GenreSpent,
           ROW_NUMBER() OVER (PARTITION BY gs.CustomerId ORDER BY gs.GenreSpent DESC) as rn
    FROM GenreSpending gs
)
SELECT
    c.FirstName || ' ' || c.LastName AS CustomerName,
    tg.GenreName,
    tg.GenreSpent
FROM Customer c
JOIN CustomerTotal ct ON c.CustomerId = ct.CustomerId
JOIN AverageSpending avg ON ct.TotalSpent > avg.AvgSpent
JOIN TopGenres tg ON c.CustomerId = tg.CustomerId
WHERE tg.rn <= 2
ORDER BY ct.TotalSpent DESC, tg.GenreSpent DESC;
```

### ğŸ–±ï¸ GUI Agent Case

<div align="center">
    <h3>GUI Agent Case</h3>
    <video src="https://github.com/user-attachments/assets/526a870b-c18b-4af7-9134-5f84b5ebeb46" />
</div>

```python
ğŸ™‹ Instruction
I want to audit all command aliases on this Ubuntu machine, so please launch the terminal from the GUI, identify any home directory config files related to shell startup, and then generate a clean, sorted list that combines both currently active aliases and those hidden in your configuration files so I can see the full definitions of commands like alert or ll.
```

### ğŸ–±ï¸ Embodied Agent Case

<table>
  <tr>
    <td align="center" width="40%" style="padding:6px;">
      <div><b>Place the mouse on the yellow pad</b></div>
      <img src="assets/step1.gif" width="100%" style="border-radius:14px; margin-top:6px;" />
    </td>
    <td align="center" width="40%" style="padding:6px;">
      <div><b>Open the laptop</b></div>
      <img src="assets/step2.gif" width="100%" style="border-radius:14px; margin-top:6px;" />
    </td>
  </tr>
  <tr>
    <td align="center" width="40%" style="padding:6px;">
      <div><b>Place the cup on the blue box</b></div>
      <img src="assets/step3.gif" width="100%" style="border-radius:14px; margin-top:6px;" />
    </td>
    <td align="center" width="40%" style="padding:6px;">
      <div><b>Store the car in the basket</b></div>
      <img src="assets/step4.gif" width="100%" style="border-radius:14px; margin-top:6px;" />
    </td>
  </tr>
</table>

## ğŸ“œ License

Apache 2.0

## âœï¸ Contributors

| Role | Members |
| :---: | :--- |
| **ğŸ¯ Project Leader** | Zhengwei Tao (tttzw@pku.edu.cn), Jialong Wu (wujialongml@gmail.com) |
| **ğŸŒŸ Core Contributor** | Bo Li, Guochen Yan, Qintong Zhang, Huanyao Zhang |
| **ğŸ’¡ Contributor** | Xinjie Lv, Haishan Lu, Yuan Xu, Haoyang Yao, Xingdi Ding |
| **ğŸ“£ Advisor** | Kuan Li ([UniPat.ai](https://unipat.ai/)) |
| **ğŸ« Supervisor** | Wentao Zhang, Bin Cui |

## ğŸŒ Citation

å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº† AgentFlowï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@misc{omniagentsynth2026,
  title={AgentFlow: Unified Agent Data Synthesis Framework},
  author={AgentFlow Team},
  year={2026},
  howpublished={\url{https://github.com/OpenDCAI/AgentFlow}}
}
```
